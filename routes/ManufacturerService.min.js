var BSON=require("mongodb").BSON,ObjectID=require("mongodb").ObjectID;ManufacturerService=function(e){this.db=e},ManufacturerService.prototype.getCollection=function(e){this.db.collection("manufacturer",function(t,n){t?e(t):e(null,n)})},ManufacturerService.prototype.findAll=function(e){this.getCollection(function(t,n){t?e(t):n.find().toArray(function(t,n){t?e(t):e(null,n)})})},ManufacturerService.prototype.save=function(e,t){this.getCollection(function(n,i){if(n)t(n);else{"undefined"==typeof e.length&&(e=[e]);for(var o=0;o<e.length;o++)manufacturer=e[o],e.created_at=new Date;i.insert(e,function(){t(null,e)})}})},ManufacturerService.prototype.findOne=function(e,t){this.getCollection(function(n,i){n?t(n):i.findOne({id:e},function(e,n){e?t(e):t(null,n)})})},ManufacturerService.prototype.update=function(e,t){this.getCollection(function(n,i){n?t(n):i.update({id:e.id},{$set:{name:e.name,description:e.description}},function(e,n){t(e?e:n)})})},ManufacturerService.prototype.remove=function(e,t){this.getCollection(function(n,i){n?t(n):i.remove({id:e},{justOne:!0},function(e,n){t(n)})})},exports.ManufacturerService=ManufacturerService;
