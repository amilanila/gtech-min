var BSON=require("mongodb").BSON,ObjectID=require("mongodb").ObjectID;PartService=function(t){this.db=t},PartService.prototype.getCollection=function(t){this.db.collection("part",function(e,n){e?t(e):t(null,n)})},PartService.prototype.findAll=function(t){this.getCollection(function(e,n){e?t(e):n.find().toArray(function(e,n){e?t(e):t(null,n)})})},PartService.prototype.save=function(t,e){this.getCollection(function(n,o){if(n)e(n);else{"undefined"==typeof t.length&&(t=[t]);for(var i=0;i<t.length;i++)part=t[i],t.created_at=new Date;o.insert(t,function(){e(null,t)})}})},PartService.prototype.findOne=function(t,e){this.getCollection(function(n,o){n?e(n):o.findOne({id:t},function(t,n){t?e(t):e(null,n)})})},PartService.prototype.update=function(t,e){this.getCollection(function(n,o){n?e(n):o.update({id:t.id},{$set:{make:t.make,model:t.model,yom:t.yom,name:t.name,description:t.description}},function(t,n){e(t?t:n)})})},PartService.prototype.remove=function(t,e){this.getCollection(function(n,o){n?e(n):o.remove({id:t},{justOne:!0},function(t,n){e(n)})})},exports.PartService=PartService;
