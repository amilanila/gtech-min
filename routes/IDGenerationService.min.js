var BSON=require("mongodb").BSON,ObjectID=require("mongodb").ObjectID;IDGenerationService=function(e){this.db=e},IDGenerationService.prototype.getCollection=function(e){this.db.collection("ids",function(n,t){n?e(n):e(null,t)})},IDGenerationService.prototype.save=function(e,n){this.getCollection(function(t,i){if(t)n(t);else{"undefined"==typeof e.length&&(e=[e]);for(var o=0;o<e.length;o++)idnumber=e[o],idnumber.created_at=new Date;i.insert(e,function(){n(null,e)})}})},IDGenerationService.prototype.findAll=function(e){this.getCollection(function(n,t){n?e(n):t.find().toArray(function(n,t){n?e(n):e(null,t)})})},IDGenerationService.prototype.update=function(e,n){this.getCollection(function(t,i){t?n(t):i.update({id:e.id},{$set:{jobnumber:e.jobnumber,invnumber:e.invnumber}},function(e,t){n(e?e:t)})})},exports.IDGenerationService=IDGenerationService;
