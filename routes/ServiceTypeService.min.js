var BSON=require("mongodb").BSON,ObjectID=require("mongodb").ObjectID;ServiceTypeService=function(e){this.db=e},ServiceTypeService.prototype.getCollection=function(e){this.db.collection("servicetype",function(i,t){i?e(i):e(null,t)})},ServiceTypeService.prototype.findAll=function(e){this.getCollection(function(i,t){i?e(i):t.find().toArray(function(i,t){i?e(i):e(null,t)})})},ServiceTypeService.prototype.save=function(e,i){this.getCollection(function(t,n){if(t)i(t);else{"undefined"==typeof e.length&&(e=[e]);for(var o=0;o<e.length;o++)model=e[o],e.created_at=new Date;n.insert(e,function(){i(null,e)})}})},ServiceTypeService.prototype.findOne=function(e,i){this.getCollection(function(t,n){t?i(t):n.findOne({id:e},function(e,t){e?i(e):i(null,t)})})},ServiceTypeService.prototype.update=function(e,i){this.getCollection(function(t,n){t?i(t):n.update({id:e.id},{$set:{code:e.code,name:e.name,description:e.description}},function(e,t){i(e?e:t)})})},ServiceTypeService.prototype.remove=function(e,i){this.getCollection(function(t,n){t?i(t):n.remove({id:e},{justOne:!0},function(e,t){i(t)})})},exports.ServiceTypeService=ServiceTypeService;
